<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Error Display</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="sounds/sounds.js?v=debug3"></script>
</head>
<body>
    <!-- Main Application Container -->
    <div id="app" class="app">
        
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <h1 class="brand-title">🚨 Live Error Display</h1>
                <span class="version-badge">v3.0</span>
            </div>
            
            <div class="header-status">
                <div class="connection-status" id="connectionStatus">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span class="status-text" id="statusText">Verbinde...</span>
                </div>
                
                <div class="session-info" id="sessionInfo" style="display: none;">
                    <div class="session-details">
                        <span class="session-name" id="sessionName">Session</span>
                        <code class="session-token" id="sessionToken">No Token</code>
                    </div>
                    <div class="session-actions">
                        <button class="btn btn-icon" id="copyToken" title="Token kopieren">📋</button>
                        <button class="btn btn-icon" id="saveSession" title="Session speichern">💾</button>
                        <button class="btn btn-icon btn-danger" id="endSession" title="Session beenden">❌</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="navigation">
            <div class="nav-menu">
                <button class="nav-btn active" id="homeBtn" data-view="home">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-label">Start</span>
                </button>
                <button class="nav-btn" id="liveBtn" data-view="live">
                    <span class="nav-icon">📡</span>
                    <span class="nav-label">Live</span>
                </button>
                <button class="nav-btn" id="archiveBtn" data-view="archive">
                    <span class="nav-icon">📂</span>
                    <span class="nav-label">Archiv</span>
                </button>
                <button class="nav-btn" id="sessionBtn" data-view="sessions">
                    <span class="nav-icon">🔑</span>
                    <span class="nav-label">Sessions</span>
                </button>
                <button class="nav-btn" id="settingsBtn" data-view="settings">
                    <span class="nav-icon">⚙️</span>
                    <span class="nav-label">Einstellungen</span>
                </button>
                <button class="nav-btn" id="apiBtn" data-view="api">
                    <span class="nav-icon">📋</span>
                    <span class="nav-label">API</span>
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Home/Start View -->
            <section id="homeView" class="view active">
                <div class="welcome-container">
                    <div class="welcome-header">
                        <h2>🚀 Willkommen bei Live Error Display</h2>
                        <p>Verwalten Sie Ihre Fehler-Logs mit Sessions und Echtzeit-Überwachung</p>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="action-card">
                            <div class="action-icon">🆕</div>
                            <h3>Neue Session erstellen</h3>
                            <p>Starten Sie eine neue Session für Ihr Projekt</p>
                            <button class="btn btn-primary" id="createSessionBtn">Session erstellen</button>
                        </div>
                        
                        <div class="action-card">
                            <div class="action-icon">🔄</div>
                            <h3>Session wiederherstellen</h3>
                            <p>Stellen Sie eine bestehende Session wieder her</p>
                            <button class="btn btn-secondary" id="restoreSessionBtn">Session laden</button>
                        </div>
                        
                        <div class="action-card">
                            <div class="action-icon">📊</div>
                            <h3>Direkt zu Live-Ansicht</h3>
                            <p>Überwachen Sie Fehler in Echtzeit</p>
                            <button class="btn btn-accent" id="goLiveBtn">Live-Modus</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Live Error View -->
            <section id="liveView" class="view">
                <div class="view-header">
                    <h2>📡 Live Error Monitoring</h2>
                    <div class="view-controls">
                        <div class="stats">
                            <span class="stat">
                                <span class="stat-label">Fehler:</span>
                                <span class="stat-value" id="errorCount">0</span>
                            </span>
                            <span class="stat">
                                <span class="stat-label">Clients:</span>
                                <span class="stat-value" id="clientCount">0</span>
                            </span>
                        </div>
                        <button class="btn btn-danger" id="clearErrorsBtn">Fehler löschen</button>
                    </div>
                </div>
                
                <div class="errors-container" id="errorsContainer">
                    <div class="empty-state">
                        <div class="empty-icon">👀</div>
                        <h3>Warten auf Fehler...</h3>
                        <p>Verbindung hergestellt. Fehler werden hier in Echtzeit angezeigt.</p>
                    </div>
                </div>
            </section>

            <!-- Archive View -->
            <section id="archiveView" class="view">
                <div class="view-header">
                    <h2>📂 Fehler Archiv</h2>
                    <div class="view-controls">
                        <div class="archive-stats">
                            <span class="stat">
                                <span class="stat-label">Archiviert:</span>
                                <span class="stat-value" id="archiveCount">0</span>
                            </span>
                        </div>
                        <button class="btn btn-danger" id="clearArchiveBtn">Archiv leeren</button>
                    </div>
                </div>
                
                <div class="archive-container" id="archiveContainer">
                    <div class="empty-state">
                        <div class="empty-icon">📁</div>
                        <h3>Archiv ist leer</h3>
                        <p>Archivierte Fehler werden hier angezeigt.</p>
                    </div>
                </div>
            </section>

            <!-- Session Management View -->
            <section id="sessionsView" class="view">
                <div class="view-header">
                    <h2>🔑 Session Management</h2>
                </div>
                
                <div class="session-grid">
                    <!-- Current Session Card -->
                    <div class="session-card current-session" id="currentSessionCard">
                        <div class="card-header">
                            <h3>🟢 Aktuelle Session</h3>
                        </div>
                        <div class="card-content" id="currentSessionContent">
                            <div class="no-session">
                                <p>Keine aktive Session</p>
                                <button class="btn btn-primary" id="createNewSessionBtn">Neue Session erstellen</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Session Creation Card -->
                    <div class="session-card">
                        <div class="card-header">
                            <h3>🆕 Neue Session</h3>
                        </div>
                        <div class="card-content">
                            <form id="newSessionForm" class="session-form">
                                <div class="form-group">
                                    <label for="newSessionName">Session Name</label>
                                    <div class="input-group">
                                        <input type="text" id="newSessionName" class="form-input" placeholder="Mein Projekt">
                                        <button type="button" class="btn btn-icon" id="randomNameBtn" title="Zufälliger Name">🎲</button>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="newSessionPassword">Passwort</label>
                                    <input type="password" id="newSessionPassword" class="form-input" placeholder="Mindestens 4 Zeichen" minlength="4">
                                </div>
                                
                                <button type="submit" class="btn btn-primary btn-full">Session erstellen</button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Session Restore Card -->
                    <div class="session-card">
                        <div class="card-header">
                            <h3>🔄 Session wiederherstellen</h3>
                        </div>
                        <div class="card-content">
                            <form id="restoreSessionForm" class="session-form">
                                <div class="form-group">
                                    <label for="restoreToken">Session Token</label>
                                    <input type="text" id="restoreToken" class="form-input" placeholder="Token eingeben...">
                                </div>
                                
                                <div class="form-group">
                                    <label for="restorePassword">Passwort</label>
                                    <input type="password" id="restorePassword" class="form-input" placeholder="Passwort (falls erforderlich)">
                                </div>
                                
                                <button type="submit" class="btn btn-secondary btn-full">Session wiederherstellen</button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings View -->
            <section id="settingsView" class="view">
                <div class="view-header">
                    <h2>⚙️ Einstellungen</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>📦 Archiv-Einstellungen</h3>
                        <form id="settingsForm" class="settings-form">
                            <div class="form-group">
                                <label for="archiveRetentionDays">Aufbewahrung (Tage)</label>
                                <div class="range-group">
                                    <input type="range" id="archiveRetentionDays" min="1" max="30" value="7" class="form-range">
                                    <span class="range-value" id="retentionValue">7</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="maxArchiveItems">Maximale Einträge</label>
                                <div class="range-group">
                                    <input type="range" id="maxArchiveItems" min="100" max="5000" step="100" value="1000" class="form-range">
                                    <span class="range-value" id="maxItemsValue">1000</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoArchive" checked>
                                    <span class="checkbox">✓</span>
                                    Automatische Archivierung
                                </label>
                            </div>
                        </form>
                    </div>
                    
                    <div class="settings-card">
                        <h3>🔧 System-Einstellungen</h3>
                        <form class="settings-form">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="soundNotifications" checked>
                                    <span class="checkbox">✓</span>
                                    Sound-Benachrichtigungen
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="desktopNotifications">
                                    <span class="checkbox">✓</span>
                                    Desktop-Benachrichtigungen
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="darkMode">
                                    <span class="checkbox">✓</span>
                                    Dark Mode
                                </label>
                            </div>
                        </form>
                    </div>
                    
                    <div class="settings-card">
                        <h3>💾 Speicher-Info</h3>
                        <div class="storage-info">
                            <div class="storage-stat">
                                <span class="storage-label">Genutzt:</span>
                                <span class="storage-value" id="storageUsed">0 KB</span>
                            </div>
                            <div class="storage-stat">
                                <span class="storage-label">Verfügbar:</span>
                                <span class="storage-value" id="storageAvailable">5 MB</span>
                            </div>
                            <button class="btn btn-danger btn-full" id="clearStorageBtn">Alle Daten löschen</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API Documentation View -->
            <section id="apiView" class="view">
                <div class="view-header">
                    <h2>📋 API Dokumentation</h2>
                </div>
                
                <div class="api-documentation">
                    <div class="api-card">
                        <h3>🔗 Basis-URL</h3>
                        <div class="code-block">
                            <code id="apiBaseUrl">http://localhost:8080</code>
                            <button class="btn btn-icon copy-btn" data-copy="apiBaseUrl">📋</button>
                        </div>
                    </div>
                    
                    <div class="api-card">
                        <h3>📤 Fehler senden</h3>
                        <div class="api-example">
                            <h4>POST /error</h4>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "message": "Database connection failed",
  "level": "error",
  "timestamp": "2025-08-09T10:30:00Z",
  "source": "UserService.js:42",
  "sessionToken": "your-session-token"
}</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="api-card">
                        <h3>🔑 Session Token</h3>
                        <div class="api-example">
                            <h4>POST /api/token</h4>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "name": "My Project",
  "password": "optional-password"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- Toast Notifications -->
        <div id="notifications" class="notifications-container"></div>

        <!-- Modals -->
        <div id="modalOverlay" class="modal-overlay">
            <div class="modal" id="modal">
                <div class="modal-header">
                    <h3 id="modalTitle">Modal</h3>
                    <button class="modal-close" id="modalClose">✕</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be inserted here -->
                </div>
                <div class="modal-footer" id="modalFooter">
                    <!-- Modal buttons will be inserted here -->
                </div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="js/session-manager.js"></script>
    <script src="js/app.js?v=v3.0"></script>
</body>
</html>
